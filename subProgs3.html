<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Python Live Editor + Console</title>
    <style>
        :root { --py-blue: #3776ab; --py-yellow: #ffd43b; --bg: #1e1e1e; --text: #d4d4d4; --console: #000; }
        body { font-family: 'Segoe UI', sans-serif; background: #2c3e50; color: white; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .container { background: #34495e; padding: 25px; border-radius: 12px; width: 95%; max-width: 1100px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .grid { display: grid; grid-template-columns: 300px 1fr; gap: 20px; margin-top: 10px; }
        
        .challenge-box { background: #252526; border: 1px solid #444; border-radius: 8px; padding: 15px; height: 450px; overflow-y: auto; }
        .jumbled-line { font-family: 'Consolas', monospace; color: var(--py-yellow); margin-bottom: 8px; font-size: 13px; border-bottom: 1px solid #333; padding-bottom: 4px; }
        
        textarea { 
            width: 100%; height: 250px; background: var(--bg); color: var(--text); 
            font-family: 'Consolas', monospace; font-size: 14px; 
            padding: 15px; border-radius: 8px 8px 0 0; border: 2px solid #555; outline: none; resize: none;
            line-height: 1.5; tab-size: 4; margin: 0; box-sizing: border-box;
        }

        .output-window {
            width: 100%; height: 200px; background: var(--console); color: #00ff00;
            font-family: 'Consolas', monospace; padding: 15px; border-radius: 0 0 8px 8px;
            border: 2px solid #555; border-top: none; box-sizing: border-box; overflow-y: auto;
            white-space: pre-wrap; font-size: 14px;
        }

        .controls { display: flex; justify-content: space-between; align-items: center; margin-top: 20px; background: #2c3e50; padding: 10px; border-radius: 8px; }
        button { padding: 10px 20px; font-weight: bold; cursor: pointer; border-radius: 5px; border: none; }
        .run-btn { background: #27ae60; color: white; }
        .reset-btn { background: #e67e22; color: white; }
        #feedback { font-weight: bold; }
        select { padding: 10px; border-radius: 5px; width: 100%; margin-bottom: 10px; font-size: 15px; }
        .label { font-size: 12px; color: #bdc3c7; text-transform: uppercase; margin-bottom: 5px; display: block;}
    </style>
</head>
<body>

<div class="container">
    <h1 style="text-align:center; margin-bottom:10px;">Python Sub-program Revision</h1>

    <select id="taskPicker" onchange="loadTask()"></select>

    <div class="grid">
        <div class="challenge-box">
            <span class="label">Jumbled Source</span>
            <div id="jumbled-display"></div>
        </div>
        
        <div class="editor-side">
            <span class="label">Python Editor (Use 4 spaces for Indent)</span>
            <textarea id="codeEditor" spellcheck="false" placeholder="Type code here..."></textarea>
            <span class="label">Virtual Console Output</span>
            <div id="consoleOutput" class="output-window">Python 3.10 Console...&#10;Ready.</div>
        </div>
    </div>

    <div class="controls">
        <div id="feedback"></div>
        <div>
            <button class="reset-btn" onclick="resetEditor()">Clear</button>
            <button class="run-btn" onclick="runCheck()">Run & Verify</button>
        </div>
    </div>
</div>

<script>
const challenges = [
    {t: "Procedure Definition", sol: ["def welcome():", "    print(\"Hello\")", "welcome()"], out: "Hello"},
    {t: "Returning a String", sol: ["def get_msg():", "    return \"System Online\"", "print(get_msg())"], out: "System Online"},
    {t: "Parameter Calculation", sol: ["def double_it(n):", "    print(n * 2)", "double_it(12)"], out: "24"},
    {t: "Adding Two Numbers", sol: ["def add(a, b):", "    return a + b", "print(add(15, 5))"], out: "20"},
    {t: "Conditional Logic", sol: ["def check(s):", "    if s >= 50:", "        return \"Pass\"", "    return \"Fail\"", "print(check(75))"], out: "Pass"},
    {t: "Looping Procedure", sol: ["def repeat_hi():", "    for i in range(3):", "        print(\"Hi\")", "repeat_hi()"], out: "Hi\nHi\nHi"},
    {t: "List Summation", sol: ["def sum_list(L):", "    total = 0", "    for x in L:", "        total += x", "    return total", "print(sum_list([10, 20]))"], out: "30"},
    {t: "Global Modifier", sol: ["score = 0", "def win():", "    global score", "    score = 100", "win()", "print(score)"], out: "100"},
    {t: "String Multiplier", sol: ["def repeat(txt, n):", "    return txt * n", "print(repeat(\"*\", 5))"], out: "*****"},
    {t: "Main Guard Pattern", sol: ["def main():", "    print(\"Running...\")", "if __name__ == \"__main__\":", "    main()"], out: "Running..."},
    {t: "Default Parameters", sol: ["def greet(user=\"Guest\"): ", "    print(f\"Hello {user}\")", "greet()"], out: "Hello Guest"},
    {t: "Exponent Function", sol: ["def power(b, e):", "    return b ** e", "print(power(2, 3))"], out: "8"},
    {t: "Boolean Toggle", sol: ["def toggle(val):", "    return not val", "print(toggle(True))"], out: "False"},
    {t: "Finding Max", sol: ["def get_max(x, y):", "    if x > y: return x", "    return y", "print(get_max(4, 9))"], out: "9"},
    {t: "Input Validation Sub", sol: ["def validate(n):", "    if n > 0: return True", "    return False", "print(validate(-5))"], out: "False"}
];

function init() {
    const picker = document.getElementById('taskPicker');
    challenges.forEach((task, idx) => {
        const opt = document.createElement('option');
        opt.value = idx;
        opt.textContent = `Task ${idx + 1}: ${task.t}`;
        picker.appendChild(opt);
    });
    loadTask();

    const editor = document.getElementById('codeEditor');
    editor.onkeydown = function(e) {
        if (e.key === 'Tab') {
            e.preventDefault();
            var start = this.selectionStart;
            var end = this.selectionEnd;
            this.value = this.value.substring(0, start) + "    " + this.value.substring(end);
            this.selectionStart = this.selectionEnd = start + 4;
        }
    };
}

function loadTask() {
    const idx = document.getElementById('taskPicker').value;
    const task = challenges[idx];
    const display = document.getElementById('jumbled-display');
    const editor = document.getElementById('codeEditor');
    const consoleOut = document.getElementById('consoleOutput');
    
    display.innerHTML = '';
    editor.value = '';
    consoleOut.innerText = "Console Ready...";
    document.getElementById('feedback').innerText = '';

    let jumbled = [...task.sol].sort(() => Math.random() - 0.5);
    jumbled.forEach(line => {
        const div = document.createElement('div');
        div.className = 'jumbled-line';
        div.textContent = line.trim();
        display.appendChild(div);
    });
}

function runCheck() {
    const idx = document.getElementById('taskPicker').value;
    const userLines = document.getElementById('codeEditor').value.split('\n').filter(l => l.trim() !== "");
    const solution = challenges[idx].sol;
    const consoleOut = document.getElementById('consoleOutput');
    const feedback = document.getElementById('feedback');

    let match = userLines.length === solution.length && userLines.every((l, i) => l === solution[i]);

    if (match) {
        consoleOut.innerText = ">>> " + challenges[idx].out;
        feedback.innerText = "✓ SUCCESS: Code runs perfectly!";
        feedback.style.color = "#27ae60";
    } else {
        consoleOut.innerText = "IndentationError or SyntaxError: \nInvalid code structure.";
        feedback.innerText = "✗ FAILED: Check order and spaces.";
        feedback.style.color = "#e74c3c";
    }
}

function resetEditor() {
    document.getElementById('codeEditor').value = '';
    document.getElementById('consoleOutput').innerText = "Console cleared.";
}

init();
</script>
</body>
</html>